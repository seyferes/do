
### **Ключевые команды**

| Команда             | Описание                                                                                                                                                                                                                                                                                                                          |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ps`                | Просмотр списка запущенных процессов<br>1. `ps -ux`: Отображает процессы, запущенные текущим пользователем.<br>2. `ps -ef`: Часто используется для просмотра всех процессов, включая демонов.<br>3. `ps -aux`: Позволяет увидеть расширенную информацию, включая статус процесса (например, R — выполняется, S — спит, Z — зомби) |
| `top`<br><br>`htop` | интерактивный мониторинг ресурсов в реальном времени.                                                                                                                                                                                                                                                                             |
| `uptime`            | краткая сводка: время работы, пользователи и Load Average.                                                                                                                                                                                                                                                                        |
| `kill PID`          | отправить сигнал процессу (по умолчанию SIGTERM).                                                                                                                                                                                                                                                                                 |
| `pidof`             | Команда для поиска PID процесса по его имени.                                                                                                                                                                                                                                                                                     |
| `jobs`              | список фоновых задач в рамках текущей сессии.                                                                                                                                                                                                                                                                                     |
| `bg`                | Отправляет остановленный процесс в фоновый режим (background)                                                                                                                                                                                                                                                                     |
| `fg`                | Возвращает процесс из фона или остановленного состояния в активный режим                                                                                                                                                                                                                                                          |
| `nohup`             | Позволяет запустить программу в фоновом режиме так, чтобы она продолжала работать даже после выхода пользователя из системы                                                                                                                                                                                                       |
### **Сигналы (Signals)**

Программные прерывания для управления поведением процесса:

- **SIGHUP (1)** — Перезапуск: заставляет демоны перечитать конфигурацию без полной остановки.
- **SIGKILL (9)** — "Грубая" остановка: ядро мгновенно выкидывает процесс из памяти. Нельзя игнорировать.
- **SIGTERM (15)** — "Вежливое" завершение: стандартный сигнал `kill`. Позволяет процессу сохранить данные и закрыть логи перед выходом.

### **Load Average и статусы процессов**

**Load Average** — это три числа (за 1, 5 и 15 минут), показывающие среднее количество процессов в очереди на исполнение или ожидающих I/O.

> **Правило большого пальца:** Если LA выше количества ядер CPU — система перегружена.

**Статусы процессов (S) в `top`:**

- **R (Running)** — Активно выполняется прямо сейчас.
- **S (Sleeping)** — "Спит", ожидая события или ввода.
- **D (Disk Sleep)** — Ожидает ответа от диска (непрерываемый сон). Если их много — проблема в дисковой подсистеме.
- **Z (Zombie)** — Процесс завершен, но все еще занимает запись в таблице процессов, так как родитель его не "похоронил".
### **Часто используемые флаги и пайплайны**

- `ps aux | grep <name>` — классический поиск PID конкретной программы.
- `kill -9 <PID>` — принудительное завершение (SIGKILL), если процесс "завис" намертво.
- `kill -1 <PID>` — (SIGHUP) перечитать конфигурацию без перезагрузки.
- В `top`: `M` — сортировка по памяти, `P` — по процессору, `k` — убить процесс не выходя из меню.

### **Pro-Tips (из реальной жизни)**

1. **SIGTERM vs SIGKILL:** На собеседованиях часто спрашивают: "Как правильно выключать базу данных?". Ответ: Всегда начинай с `kill` (SIGTERM). Дай базе время закрыть транзакции и сохранить данные. `kill -9` — это крайняя мера, которая может привести к повреждению данных.
2. **Load Average:** LA — это не только CPU. Если твой диск "тормозит" (состояние `D` в `top`), LA тоже будет расти. Всегда смотри на показатель `%wa` (I/O Wait) в `top` — он показывает, сколько времени CPU простаивает, ожидая ответа от диска.

### **Подводные камни**

- **PID меняется:** Если ты перезапустил сервис, его PID изменится. Не используй старые ID.
- **Поиск без мусора:** Чтобы `grep` не находил сам себя в списке процессов, используй: `ps aux | grep [s]leep`.
- **Анализ нагрузки:** Если LA высокий, но CPU простаивает (высокий `%id`), смотри на показатель `%wa` (I/O Wait) — скорее всего, тормозит диск.
- **Zombies:** Если ты видишь процессы со статусом `Z` — их нельзя убить через `kill -9`. Нужно "пинать" родительский процесс или ждать перезагрузки.