# Права доступа к файлам

В Linux всё основано на безопасности, и у каждого файла или папки есть свои **права доступа**

1. **Тип объекта:** первый символ. `-` — обычный файл, `d` — директория (directory)
2. **Три группы прав:**
    
    - **u** (user/owner) — что может делать владелец (первые три буквы после типа)
    - **g** (group) — что могут делать члены группы владельца (следующие три буквы)
    - **o** (others) — что могут делать все остальные пользователи в системе

**Сами права обозначаются тремя буквами:**

- **r** (read) — чтение.
- **w** (write) — запись и изменение
- **x** (execute) — выполнение (для программ или скриптов) или вход в папку

`-rwxr-x---` 
1. Файл 
2. user/owner может делать все, (`rwx`)
3. Группы могут **read & exexute** (`r-x`)
4. others не могут ничего (`---`)

## Два основных способа менять права: **символьный** (буквами) и **числовой** (цифрами).

### Символьный (удобен для точечных изменений)

Используем:
буквы для обозначений субъекбта (`u`, `g`, `o`, `a` — все)
действия (`+` добавить, `-` забрать, `=`  установить) 

- `chmod u+x file` — добавить владельцу право на выполнение
- `chmod g-w file` — забрать у группы право на запись
- `chmod o=r file` — установить «другим» права только на чтение

### Числовой (самый быстрый и популярный)

Каждому праву соответствует число:

- **4** — чтение (`r`)
- **2** — запись (`w`)
- **1** — выполнение (`x`)
- **0** — нет прав

Чтобы задать права для группы (например, владельца), мы просто складываем эти числа. Если мы хотим дать `rwx`, то $4 + 2 + 1 = 7$. Если только `r-x`, то $4 + 0 + 1 = 5$.

В итоге команда выглядит как три цифры (для владельца, группы и остальных): `chmod 750 file`

# Владельцы и группы

Важно понимать, **кому** именно мы их разграничиваем. У каждого файла в Linux есть:

1. **Владелец (Owner)** — обычно тот, кто создал файл .
2. **Группа (Group)** — набор пользователей, которым разрешен определенный уровень доступа к файлу .

Чтобы изменить владельца или группу, используются две команды:

- **`chown`** (change owner) — меняет владельца файла.
    - _Пример:_ `sudo chown admin script.sh` (теперь владельцем стал admin).
    
- **`chgrp`** (change group) — меняет только группу.
    - _Пример:_ `chgrp developers script.sh`.

Часто их объединяют: `chown user:group file`.

> **Важно:** Для смены владельца почти всегда требуются права суперпользователя (`sudo`), так как обычный пользователь не может «отдать» свой файл кому-то другому или забрать чужой.

---

### 2.21. Специальные права доступа

Иногда стандартных `rwx` недостаточно. Существуют три специальных бита, которые расширяют возможности:

1. **SUID** (Set User ID): Если этот бит установлен на исполняемом файле, любой, кто его запустит, получит на время работы права **владельца** этого файла. Часто используется для программ, которым нужен доступ к системным ресурсам (например, смена пароля).
2. **SGID** (Set Group ID): Аналогично, но дает права **группы**. Если установить его на папку, все новые файлы внутри будут наследоваться группой этой папки.
3. **Sticky Bit**: Чаще всего ставится на общие папки (как `/tmp`). Он разрешает удалять файлы только их непосредственным владельцам, даже если у других есть права на запись в эту папку